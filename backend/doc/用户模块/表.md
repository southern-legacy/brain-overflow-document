## 用户基本信息表

这个表存储了所有的**个体用户认证信息**

|      字段名      | 主键？ | 备选键？ |     check      |               数据类型                |      索引类型       |                                         备注                                          |
| :-----------: | :-: | :--: | :------------: | :-------------------------------: | :-------------: | :---------------------------------------------------------------------------------: |
|     name      |     |      |                |           `VARCHAR(32)`           |      btree      |                                                                                     |
|      id       |  ✓  |      |                |           自增主键，`SERIAL`           |      主键索引       |                                                                                     |
|     email     |     |      |  邮箱的正则，UNIQUE  |          `VARCHAR(256)`           | unique索引，psql自带 | 根据 [RFC5321](https://www.rfc-editor.org/rfc/rfc5321#section-4.5.3.1.3)的规范不得超过254个字符 |
|     phone     |     |      | 电话号码的正则，UNIQUE | `CHAR(16)`，E.164 电话号码长度最长为 15 个字符 |       同上        |                                                                                     |
| password_hash |     |      |                |                                   |                 |                                   将客户端传过来的密码哈希后存储                                   |
## 用户扩展信息表（如头像，自我介绍之类）

这个表储存了所有的**用户自定义信息**

|    字段名     | 主键？ | 备选键？ |       check        |       数据类型       | 索引类型 |               备注               |
| :--------: | :-: | :--: | :----------------: | :--------------: | :--: | :----------------------------: |
|   usr_id   |  ✓  |      | 外键，引用[[表#用户基本信息表]] | `BIGINT`，与外键保持一致 | 主键索引 |                                |
| biography  |     |      |                    |      `TEXT`      |      |          Markdown 格式           |
|   avator   |     |      |                    |      `TEXT`      |      |      nginx 等静态代理的请求路径，头像       |
| background |     |      |                    |      `TEXT`      |      |     nginx 等静态代理的请求路径，背景图片      |
| contact_me |     |      |                    |     `JSONB`      |      | 将所有的该用户自定义的练习方式以 `JSON` 数组形式存放 |
| updated_at |     |      |                    |   `TIMESTAMPZ`   |      |       最近一次修改的时间，用于客户端缓存        |
